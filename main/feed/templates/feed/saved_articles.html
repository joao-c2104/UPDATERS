{% extends "feed/base.html" %}
{% load static %}

{% block body_class %}page-full-width{% endblock %}
{% block title %}Notícias Salvas - Jornal do Commercio{% endblock %}

{% block content %}

<div class="saved-page">
    <div class="saved-page-header">
        <div class="saved-page-badge">
            <span class="icon">★</span>
            Notícias Salvas
        </div>
        <p class="saved-page-count">
            Você tem <strong class="saved-page-count-strong">{{ articles|length }}</strong> artigo{{ articles|length|pluralize }} salvo{{ articles|length|pluralize }} na sua lista de leitura.
        </p>
    </div>

    {% if articles %}
        <div class="saved-grid">
            {% for article in articles %}
                <article class="saved-card">
                    <a href="{% url 'article-detail' article.slug %}" class="saved-card-link">
                        <div class="saved-card-image-container">
                            {% if article.image %}
                                <img src="{{ article.image.url }}" alt="{{ article.title }}" class="saved-card-image">
                            {% else %}
                                <div class="saved-card-image" style="background-color: #eee; display:flex; align-items:center; justify-content:center;">
                                    <span style="color:#999;">Sem imagem</span>
                                </div>
                            {% endif %}
                            
                            <span class="saved-card-category">
                                {{ article.category.name|default:'Geral' }}
                            </span>
                        </div>

                        <div class="saved-card-content">
                            <div class="saved-card-status-row">
                                <span class="saved-badge-saved">
                                    <span class="saved-badge-saved-circle"></span>
                                    Salvo
                                </span>
                                <span class="saved-card-date">
                                    {{ article.publication_date|date:"d/m/Y" }}
                                </span>
                            </div>

                            <h3 class="saved-card-title">{{ article.title }}</h3>
                            <p class="saved-card-summary">
                                {{ article.summary|truncatewords:20 }}
                            </p>

                            <div class="saved-card-meta">
                                <span class="saved-card-author">Por {{ article.author }}</span>
                                
                                <form method="POST" action="{% url 'toggle_save_article' article.id %}" style="display:inline;">
                                    {% csrf_token %}
                                    <button type="submit" style="background:none; border:none; cursor:pointer; color:#B00000; font-weight:bold; font-size:0.8rem; text-transform:uppercase;">
                                        Remover
                                    </button>
                                </form>
                            </div>
                        </div>
                    </a>
                </article>
            {% endfor %}
        </div>
    {% else %}
        <div class="saved-empty">
            <div class="saved-empty-icon">★</div>
            <h2 class="saved-empty-title">Sua lista está vazia</h2>
            <p class="saved-empty-text">
                Você ainda não salvou nenhuma notícia. Navegue pelo feed e clique na estrela para ler depois.
            </p>
            <div class="saved-empty-actions">
                <a href="{% url 'article-list' %}" class="saved-empty-btn-primary">
                    Ir para o Feed
                </a>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}